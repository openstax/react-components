!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("underscore"),require("react"),require("react-bootstrap"),require("react-scroll-components")):"function"==typeof define&&define.amd?define("OpenStaxReactComponents",["underscore","react","react-bootstrap","react-scroll-components"],t):"object"==typeof exports?exports.OpenStaxReactComponents=t(require("underscore"),require("react"),require("react-bootstrap"),require("react-scroll-components")):e.OpenStaxReactComponents=t(e._,e.React,e.ReactBootstrap,e.ReactScrollComponents)}(this,function(e,t,n,r){return function(e){function t(r){if(n[r])return n[r].exports;var s=n[r]={exports:{},id:r,loaded:!1};return e[r].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="/assets/",t(0)}([function(e,t,n){var r,s,o,i,a,p,c,u,l,d,h,f,m,y,g;a=n(1),c=n(15),p=n(7),h=n(19),g=n(9),d=g.PinnedHeader,o=g.CardBody,l=g.PinnableFooter,f=n(14),r=n(12),m=n(17),s=n(16),i=n(8),u=n(22),y=n(21),e.exports={Exercise:a,ExerciseGroup:p,FreeResponse:c,PinnedHeaderFooterCard:h,PinnedHeader:d,CardBody:o,PinnableFooter:l,Question:f,ArbitraryHtmlAndMath:r,RefreshButton:m,AsyncButton:s,ChapterSectionMixin:i,GetPositionMixin:u,ResizeListenerMixin:y}},function(e,t,n){(function(t,r){var s,o,i,a,p,c,u,l,d,h;l=n(4),o=n(5),d=n(18).propTypes,h=d.ExerciseStepCard.step,u=["refreshStep","recoverFor","canTryAnother"],p=["onNextStep","canReview","disabled"],c=t.union(p,["onStepCompleted","canTryAnother"]),a=t.union(u,["disabled"]),i=t.union(u,["onStepCompleted","onNextStep","canReview"]),s=r.createClass({displayName:"Exercise",propTypes:{id:r.PropTypes.string.isRequired,taskId:r.PropTypes.string.isRequired,onStepCompleted:r.PropTypes.func.isRequired,onNextStep:r.PropTypes.func.isRequired,getCurrentPanel:r.PropTypes.func.isRequired,step:h,setFreeResponseAnswer:r.PropTypes.func.isRequired,setAnswerId:r.PropTypes.func.isRequired,getReadingForStep:r.PropTypes.func,refreshStep:r.PropTypes.func,recoverFor:r.PropTypes.func,review:r.PropTypes.string,focus:r.PropTypes.bool,courseId:r.PropTypes.string,canTryAnother:r.PropTypes.bool,canReview:r.PropTypes.bool,disabled:r.PropTypes.bool},getInitialState:function(){var e;return e=this.props.id,{currentPanel:this.props.getCurrentPanel(e)}},componentWillMount:function(){var e;return e=this.props.id,this.state.currentPanel?void 0:this.updateCurrentPanel(this.props)},componentWillReceiveProps:function(e){return this.updateCurrentPanel(e)},updateCurrentPanel:function(e){var t,n;return n=(e||this.props).id,t=this.props.getCurrentPanel(n),null!=t&&this.state.currentPanel!==t?this.setState({currentPanel:t}):void 0},getDefaultProps:function(){return{focus:!0,review:"",pinned:!0,canTryAnother:!1,canReview:!1}},refreshMemory:function(){var e,t,n,r;return n=this.props,e=n.id,r=n.taskId,t=this.props.getReadingForStep(e,r).index,this.props.refreshStep(t,e)},tryAnother:function(){var e;return e=this.props.id,this.props.recoverFor(e)},onFreeResponseContinue:function(e){var t,n;return n=this.props.id,t=e.freeResponse,this.props.setFreeResponseAnswer(n,t)},onMultipleChoiceAnswerChanged:function(e){var t;return t=this.props.id,this.props.setAnswerId(t,e.id)},getReviewProps:function(){var e;return e=t.omit(this.props,p),e.onContinue=this.props.onNextStep,e.refreshMemory=this.refreshMemory,e.tryAnother=this.tryAnother,e},getMultipleChoiceProps:function(){var e;return e=t.omit(this.props,a),e.onAnswerChanged=this.onMultipleChoiceAnswerChanged,e},getFreeResponseProps:function(){var e;return e=t.omit(this.props,i),e.onContinue=this.onFreeResponseContinue,e},getTeacherReadOnlyProps:function(){var e;return e=t.omit(this.props,c),e.onContinue=this.props.onNextStep,e.isContinueEnabled=!1,e.controlButtons=!1,e.type="teacher-review",e},render:function(){var e,t,n,s,i,a;return i=this.props,s=i.id,h=i.step,a=i.waitingText,t=this.state.currentPanel,n=l("get-"+t+"-props"),e="function"==typeof this[n]?this[n]():void 0,r.createElement(o,r.__spread({},e,{step:h,panel:t,waitingText:a}))}}),e.exports=s}).call(t,n(2),n(3))},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){"use strict";e.exports=function(){var e=[].map.call(arguments,function(e){return e.trim()}).filter(function(e){return e.length}).join("-");return e.length?1!==e.length&&/[_.\- ]+/.test(e)?e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(e,t){return t.toUpperCase()}):e[0]===e[0].toLowerCase()&&e.slice(1)!==e.slice(1).toLowerCase()?e:e.toLowerCase():""}},function(e,t,n){(function(t,r){var s,o,i,a,p,c,u,l,d,h,f,m,y,g,v,w,T,C;g=n(6),h=n(7),i=n(9).CardBody,T=n(10),a=T.ExContinueButton,l=T.ExReviewControls,p=T.ExFreeResponse,c=T.ExMultipleChoice,u=T.ExReview,C=n(18),v=C.propTypes,w=C.props,y={"free-response":p,"multiple-choice":c,review:u,"teacher-read-only":u},o={"free-response":a,"multiple-choice":a,review:l,"teacher-read-only":a},s={"free-response":"freeResponse","multiple-choice":"answerId",review:null,"teacher-read-only":null},m={"free-response":"onFreeResponseChange","multiple-choice":"onAnswerChanged",review:"onChangeAnswerAttempt","teacher-read-only":"onChangeAnswerAttempt"},d=t.createClass({displayName:"ExerciseDefaultFooter",render:function(){return t.createElement("div",null,this.props.controlButtons)}}),f=t.createClass({displayName:"ExerciseStepCard",propTypes:v.ExerciseStepCard,getDefaultProps:function(){return{disabled:!1,isContinueEnabled:!0,Footer:d}},getInitialState:function(){var e;return e=this.props.step,{freeResponse:e.free_response,answerId:e.answer_id}},isContinueEnabled:function(){var e,t,n;return e=this.props.panel,n=s[e],null==n?!0:(null!=(t=this.state[n])?t.trim().length:void 0)>0},onAnswerChanged:function(e){var t;return this.setState({answerId:e.id}),"function"==typeof(t=this.props).onAnswerChanged?t.onAnswerChanged(e):void 0},onFreeResponseChange:function(e){var t;return this.setState({freeResponse:e}),"function"==typeof(t=this.props).onFreeResponseChange?t.onFreeResponseChange(e):void 0},onChangeAnswerAttempt:function(e){var t;return console.log("You cannot change an answer on a problem you've reviewed.","TODO: show warning in ui."),"function"==typeof(t=this.props).onChangeAnswerAttempt?t.onChangeAnswerAttempt(e):void 0},onContinue:function(){var e,t,n,r,s,o;return o=this.props,s=o.panel,e=o.canReview,n=o.onNextStep,r=o.onStepCompleted,t=o.onContinue,null!=t?void t(this.state):"multiple-choice"!==s||(r(),e)?void 0:n()},render:function(){var e,n,s,a,p,c,u,l,d,f,v,T,C,P,b,x,E,_,S;return x=this.props,_=x.step,C=x.panel,b=x.pinned,v=x.isContinueEnabled,S=x.waitingText,c=x.controlButtons,p=x.className,s=x.Footer,f=_.group,E=_.related_content,n=y[C],e=o[C],T=m[C],u=r.pick(this.props,w.ExReviewControls),u.isContinueEnabled=v&&this.isContinueEnabled(),u.onContinue=this.onContinue,P=r.omit(this.props,w.notPanel),P.choicesEnabled=!S,P[T]=this[T],d=r.pick(this.props,w.StepFooter),d.controlButtons=c||t.createElement(e,t.__spread({},u)),l=t.createElement(s,t.__spread({},d)),a=g("task-step",p),t.createElement(i,{className:a,footer:l,pinned:b},t.createElement("div",{className:"exercise-"+C},t.createElement(n,t.__spread({},_,P)),t.createElement(h,{key:"step-exercise-group",group:f,related_content:E})))}}),e.exports=f}).call(t,n(3),n(2))},function(e,t,n){var r;/*!
	  Copyright (c) 2015 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function s(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e+=" "+n;else if(Array.isArray(n))e+=" "+s.apply(null,n);else if("object"===r)for(var i in n)o.call(n,i)&&n[i]&&(e+=" "+i)}}return e.substr(1)}var o={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=s:(r=function(){return s}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)))}()},function(e,t,n){(function(t,r){var s,o,i,a,p;p=n(4),s=n(8),o={show:!1},a={"default":o,core:o,personalized:{show:!0,label:"Personalized"},"spaced practice":{show:!0},spaced_practice:{show:!0}},i=t.createClass({displayName:"ExerciseGroup",mixins:[s],propTypes:{group:t.PropTypes.oneOf(r.keys(a)).isRequired,related_content:t.PropTypes.array.isRequired},getDefaultProps:function(){return{group:"default",related_content:[]}},getPossibleGroups:function(){return r.keys(a)},buildLabel:function(e){var t;return t=this.sectionFormat(e.chapter_section,this.props.sectionSeparator),"Review - "+t+" "+e.title},getGroupLabel:function(e,t){var n;return n=null!=a[e].label?a[e].label:r.map(t,this.buildLabel)},render:function(){var e,n,r,s,o,i;return o=this.props,n=o.group,i=o.related_content,r=null,a[n].show&&(e=n.replace(" ","_"),s=this.getGroupLabel(n,i),r=t.createElement("div",{className:"task-step-group"},t.createElement("i",{className:"icon-sm icon-"+e}),t.createElement("span",{className:"task-step-group-label"},s))),r}}),e.exports=i}).call(t,n(3),n(2))},function(e,t,n){(function(t){e.exports={getDefaultProps:function(){return{sectionSeparator:".",skipZeros:!0,inputStringSeparator:"."}},sectionFormat:function(e,n){var r,s,o,i,a;return s=this.props,r=s.inputStringSeparator,a=s.skipZeros,i=s.sectionSeparator,t.isString(e)&&(o=e.split(r)),t.isArray(e)&&(o=e),o=t.clone(o),a&&0===t.last(o)&&o.pop(),o instanceof Array?o.join(n||i):e}}}).call(t,n(2))},function(e,t,n){(function(t){var n,r,s;s=t.createClass({displayName:"PinnedHeader",propTypes:{className:t.PropTypes.string},render:function(){var e,n;return e=this.props.className,n="pinned-header",null!=e&&(n+=" "+e),t.createElement("div",{className:n},this.props.children)}}),r=t.createClass({displayName:"PinnableFooter",propTypes:{className:t.PropTypes.string,pinned:t.PropTypes.bool.isRequired},getDefaultProps:function(){return{pinned:!0}},render:function(){var e,n,r,s,o;return o=this.props,e=o.className,s=o.pinned,n=s?"pinned":"card",r=n+"-footer",null!=e&&(r+=" "+e),t.createElement("div",{className:r},this.props.children)}}),n=t.createClass({displayName:"CardBody",propTypes:{className:t.PropTypes.string,footerClassName:t.PropTypes.string,pinned:t.PropTypes.bool.isRequired},getDefaultProps:function(){return{pinned:!0}},render:function(){var e,n,s,o,i,a,p,c;return c=this.props,n=c.className,p=c.pinned,i=c.footerClassName,o=c.footer,e=c.children,s="card-body",null!=n&&(s+=" "+n),o&&(a=t.createElement(r,{pinned:p,className:i},o)),t.createElement("div",{className:s},e,a)}}),e.exports={PinnedHeader:s,CardBody:n,PinnableFooter:r}}).call(t,n(3))},function(e,t,n){(function(t,r){var s,o,i,a,p,c,u,l,d,h,f,m,y,g;s=n(12),f=n(14),h=n(15),o=n(16),d=n(7),i=n(9).CardBody,g=n(18),m=g.propTypes,y=g.props,a=t.createClass({displayName:"ExContinueButton",propTypes:m.ExContinueButton,getDefaultProps:function(){return{isContinueFailed:!1,waitingText:null,isContinueEnabled:!0}},render:function(){var e,n,r,s,i,a,p;return a=this.props,r=a.isContinueEnabled,s=a.isContinueFailed,p=a.waitingText,i=a.onContinue,n=a.children,e=n||"Continue",t.createElement(o,{bsStyle:"primary",className:"continue",key:"step-continue",onClick:i,disabled:!r,isWaiting:!!p,waitingText:p,isFailed:s},e)}}),l=t.createClass({displayName:"ExReviewControls",propTypes:m.ExReviewControls,getDefaultProps:function(){return{review:"",canTryAnother:!1,isRecovering:!1,canRefreshMemory:!1}},render:function(){var e,n,s,i,p,c,u,l,d,h,f,m,y,g,v,w,T;return d=this.props,g=d.review,n=d.canTryAnother,v=d.tryAnother,u=d.isRecovering,h=this.props,e=h.canRefreshMemory,m=h.refreshMemory,f=this.props,c=f.isContinueFailed,T=f.waitingText,l=f.onContinue,p=f.isContinueEnabled,i=n?"Move On":"",n&&(w=t.createElement(o,{key:"step-try-another",bsStyle:"primary",className:"-try-another",onClick:v,isWaiting:u,waitingText:"Loading Another…"},"Try Another")),e&&(y=t.createElement(r.Button,{key:"step-refresh",bsStyle:"primary",className:"-refresh-memory",onClick:m},"Refresh My Memory")),s="completed"!==g?t.createElement(a,{key:"step-continue",isContinueFailed:c,waitingText:T,onContinue:l,isContinueEnabled:p},i):void 0,t.createElement("div",{className:"task-footer-buttons",key:"step-buttons"},w,s)}}),p=t.createClass({displayName:"ExFreeResponse",propTypes:m.ExFreeResponse,getDefaultProps:function(){return{disabled:!1,free_response:""}},componentDidMount:function(){return this.focusBox()},componentDidUpdate:function(){return this.focusBox()},focusBox:function(){return this.props.focus?this.refs.freeResponse.getDOMNode().focus():void 0},onFreeResponseChange:function(){var e,t;return t=this.refs.freeResponse.getDOMNode().value,"function"==typeof(e=this.props).onFreeResponseChange?e.onFreeResponseChange(t):void 0},render:function(){var e,n,r,o,i,a;return a=this.props,e=a.content,n=a.disabled,o=a.onFreeResponseChange,r=a.free_response,i=e.questions[0],t.createElement("div",{className:"exercise"},t.createElement(s,{className:"stimulus",block:!0,html:e.stimulus_html}),t.createElement(s,{className:"stem",block:!0,html:i.stem_html}),t.createElement("textarea",{disabled:n,ref:"freeResponse",placeholder:"Enter your response",defaultValue:r,onChange:this.onFreeResponseChange}),t.createElement("div",{className:"exercise-uid"},e.uid))}}),c=t.createClass({displayName:"ExMulitpleChoice",propTypes:m.ExMulitpleChoice,getDefaultProps:function(){return{answer_id:""}},getInitialState:function(){var e;return e=this.props.answer_id,{answerId:e}},onAnswerChanged:function(e){var t;if(e.id!==this.state.answerId)return this.setState({answerId:e.id}),"function"==typeof(t=this.props).onAnswerChanged?t.onAnswerChanged(e):void 0},render:function(){var e,n,r,s,o,i,a;return a=this.props,r=a.content,o=a.free_response,s=a.correct_answer_id,n=a.choicesEnabled,i=r.questions[0],e=this.state.answerId,t.createElement("div",{className:"exercise"},t.createElement(f,{answer_id:e,onChange:this.onAnswerChanged,choicesEnabled:n,model:i,exercise_uid:r.uid,correct_answer_id:s},t.createElement(h,{free_response:o}),t.createElement("div",{className:"multiple-choice-prompt"},"Choose the best answer from the following:")))}}),u=t.createClass({displayName:"ExReview",propTypes:m.ExReview,render:function(){var e,n,r,s,o,i,a,p,c;return p=this.props,n=p.content,o=p.free_response,e=p.answer_id,r=p.correct_answer_id,s=p.feedback_html,c=p.type,i=p.onChangeAnswerAttempt,a=n.questions[0],t.createElement("div",{className:"exercise"},t.createElement(f,{key:"step-question",model:a,answer_id:e,exercise_uid:n.uid,correct_answer_id:r,feedback_html:s,type:c,onChangeAttempt:i},t.createElement(h,{free_response:o})))}}),e.exports={ExContinueButton:a,ExReviewControls:l,ExFreeResponse:p,ExMultipleChoice:c,ExReview:u}}).call(t,n(3),n(11))},function(e,t){e.exports=n},function(e,t,n){(function(t,r){var s;s=n(13).typesetMath,e.exports=t.createClass({displayName:"ArbitraryHtmlAndMath",propTypes:{className:t.PropTypes.string,html:t.PropTypes.string,block:t.PropTypes.bool.isRequired},getDefaultProps:function(){return{block:!1}},render:function(){var e,n;return e=["has-html"],this.props.className&&e.push(this.props.className),e=e.join(" "),n=r.omit(this.props,"className","block","html"),this.props.block?t.createElement("div",t.__spread({},n,{className:e,dangerouslySetInnerHTML:this.getHTMLFromProp()})):t.createElement("span",t.__spread({},n,{className:e,dangerouslySetInnerHTML:this.getHTMLFromProp()}))},getHTMLFromProp:function(){var e;return e=this.props.html,e?{__html:e}:void 0},shouldComponentUpdate:function(e,t){var n,r;for(n in e)if(r=e[n],this.props[n]!==r)return!0;return!1},componentDidMount:function(){return this.updateDOMNode()},componentDidUpdate:function(){return this.updateDOMNode()},updateDOMNode:function(){var e,t;return t=this.getDOMNode(),e=t.querySelectorAll("a"),r.each(e,function(e){var t;return"#"!==(null!=(t=e.getAttribute("href"))?t[0]:void 0)?e.setAttribute("target","_blank"):void 0}),s(t)}})}).call(t,n(3),n(2))},function(e,t,n){(function(t){var n,r,s,o,i,a,p,c,u;s="‌‌‌",o="​​​",r="[data-math]:not(.math-rendered)",i="math:not(.math-rendered)",n=r+", "+i,a=function(){return window.MathJax.Hub.Queue([function(){var e,t,n,r,s,o;for(s=["MathJax_Message","MathJax_Font_Test"],o=[],t=0,n=s.length;n>t&&(r=s[t],e=document.getElementById(r),e);t++)e.parentElement!==document.body&&(e=e.parentElement),o.push(e.parentElement.removeChild(e));return o}])},c=function(){var e,n,p,c,u,l;for(e=[],l=document.querySelectorAll(r),p=0,c=l.length;c>p;p++)u=l[p],n=u.getAttribute("data-math"),"div"===u.tagName.toLowerCase()?u.textContent=""+s+n+s:u.textContent=""+o+n+o,e.push(u);return e=e.concat(t.pluck(document.querySelectorAll(i),"parentNode")),window.MathJax.Hub.Typeset(e),a()},c=t.debounce(c,10),u=function(e){var t,r;return null!=(null!=(t=window.MathJax)&&null!=(r=t.Hub)?r.Queue:void 0)&&e.querySelector(n)?c():void 0},p=function(){var e,t,n;return e={showProcessingMessages:!1,tex2jax:{displayMath:[[s,s]],inlineMath:[[o,o]]},styles:{"#MathJax_Message":{visibility:"hidden",left:"",right:0},"#MathJax_MSIE_Frame":{visibility:"hidden",left:"",right:0}}},t=function(){return window.MathJax.Hub.Configured()},(null!=(n=window.MathJax)?n.Hub:void 0)?(window.MathJax.Hub.Config(e),window.MathJax.Hub.processSectionDelay=0,t()):(e.AuthorInit=t,window.MathJax=e)},e.exports={typesetMath:u,startMathJax:p}}).call(t,n(2))},function(e,t,n){(function(t,r){var s,o,i,a=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=n(12),i=0,s=t.createClass({displayName:"Answer",propTypes:{answer:t.PropTypes.shape({id:t.PropTypes.oneOfType([t.PropTypes.string,t.PropTypes.number]).isRequired,content_html:t.PropTypes.string.isRequired,correctness:t.PropTypes.string,selected_count:t.PropTypes.number}).isRequired,iter:t.PropTypes.number.isRequired,qid:t.PropTypes.oneOfType([t.PropTypes.string,t.PropTypes.number]).isRequired,type:t.PropTypes.string.isRequired,hasCorrectAnswer:t.PropTypes.bool.isRequired,onChangeAnswer:t.PropTypes.func.isRequired,disabled:t.PropTypes.bool,chosen_answer:t.PropTypes.array,correct_answer_id:t.PropTypes.string,answered_count:t.PropTypes.number},getDefaultProps:function(){return{disabled:!1}},render:function(){var e,n,r,s,p,c,u,l,d,h,f,m,y,g,v,w,T,C;return v=this.props,e=v.answer,h=v.iter,y=v.qid,C=v.type,p=v.correct_answer_id,n=v.answered_count,u=v.hasCorrectAnswer,r=v.chosen_answer,f=v.onChangeAnswer,c=v.disabled,null==y&&(y="auto-"+i++),w=e.id,l=a.call(r,w)>=0,d=e.id===p,null!=e.correctness&&(d="1.0"===e.correctness),s=["answers-answer"],l&&s.push("answer-checked"),d&&s.push("answer-correct"),s=s.join(" "),u||"teacher-review"===C||(g=t.createElement("input",{type:"radio",className:"answer-input-box",checked:l,id:y+"-option-"+h,name:y+"-options",onChange:f(e),disabled:c})),"teacher-review"===C&&(m=Math.round(e.selected_count/n*100)||0,T=t.createElement("div",{className:"selected-count","data-count":""+e.selected_count,"data-percent":""+m})),t.createElement("div",{className:s},T,g,t.createElement("label",{htmlFor:y+"-option-"+h,className:"answer-label"},t.createElement("div",{className:"answer-letter"}),t.createElement(o,{className:"answer-content",html:e.content_html})))}}),e.exports=t.createClass({displayName:"Question",propTypes:{model:t.PropTypes.object.isRequired,type:t.PropTypes.string.isRequired,answer_id:t.PropTypes.string,correct_answer_id:t.PropTypes.string,content_uid:t.PropTypes.string,feedback_html:t.PropTypes.string,answered_count:t.PropTypes.number,onChange:t.PropTypes.func,onChangeAttempt:t.PropTypes.func},getInitialState:function(){return{answer:null}},getDefaultProps:function(){return{type:"student"}},onChangeAnswer:function(e){return function(t){return function(n){var r;return null!=t.props.onChange?(t.setState({answer_id:e.id}),t.props.onChange(e)):(n.preventDefault(),"function"==typeof(r=t.props).onChangeAttempt?r.onChangeAttempt(e):void 0)}}(this)},render:function(){var e,n,a,p,c,u,l,d,h,f,m;return f=this.props,m=f.type,e=f.answered_count,a=f.choicesEnabled,l=this.props.model.stem_html,d=this.props.model.id||"auto-"+i++,u=!!this.props.correct_answer_id,this.props.feedback_html&&(c=t.createElement("div",{className:"question-feedback"},t.createElement(o,{className:"question-feedback-content has-html",html:this.props.feedback_html,block:!0}))),h={qid:this.props.model.id,correct_answer_id:this.props.correct_answer_id,hasCorrectAnswer:u,chosen_answer:[this.props.answer_id,this.state.answer_id],onChangeAnswer:this.onChangeAnswer,type:m,answered_count:e,disabled:!a},n=r.chain(this.props.model.answers).sortBy(function(e){return parseInt(e.id)}).map(function(e,n){var o,i;return o={answer:e,iter:n,key:h.qid+"-option-"+n},i=r.extend({},o,h),t.createElement(s,t.__spread({},i))}).value(),p=["question"],u&&p.push("has-correct-answer"),p=p.join(" "),t.createElement("div",{className:p},t.createElement(o,{className:"question-stem",block:!0,html:l}),this.props.children,t.createElement("div",{className:"answers-table"},n),c,t.createElement("div",{className:"exercise-uid"},this.props.exercise_uid))}})}).call(t,n(3),n(2))},function(e,t,n){(function(t){var n;n=t.createClass({displayName:"FreeResponse",propTypes:{free_response:t.PropTypes.string.isRequired},getDefaultProps:function(){return{free_response:""}},render:function(){var e,r,s,o;return s=this.props,r=s.free_response,o=s.student_names,n=null,e={className:"free-response"},null!=o&&(e["data-student-names"]=o.join(", ")),null!=r&&r.length&&(n=t.createElement("div",t.__spread({},e),t.createElement("div",{className:"free-response-content"},r))),n}}),e.exports=n}).call(t,n(3))},function(e,t,n){(function(t,r,s){var o;o=n(17),e.exports=t.createClass({displayName:"AsyncButton",getInitialState:function(){return{isTimedout:!1}},componentDidUpdate:function(){var e,t,n,s,o;return s=this.props,n=s.isWaiting,e=s.isJob,t=this.state.isTimedout,o=e?6e5:3e4,n&&!t?r.delay(function(e){return function(){return e.checkForTimeout()}}(this),o):void 0},checkForTimeout:function(){var e;return e=this.props.isWaiting,e?this.setState({isTimedout:!0}):void 0},propTypes:{isWaiting:t.PropTypes.bool.isRequired,isDone:t.PropTypes.bool,isFailed:t.PropTypes.bool,waitingText:t.PropTypes.node,failedState:t.PropTypes.func,failedProps:t.PropTypes.object,doneText:t.PropTypes.node,isJob:t.PropTypes.bool},getDefaultProps:function(){return{isDone:!1,isFailed:!1,waitingText:"Loading…",failedState:o,failedProps:{beforeText:"There was a problem.  "},doneText:"",isJob:!1}},render:function(){var e,n,r,o,i,a,p,c,u,l,d,h,f,m,y,g,v,w;return h=this.props,r=h.className,o=h.disabled,f=this.props,d=f.isWaiting,c=f.isDone,u=f.isFailed,m=this.props,n=m.children,w=m.waitingText,p=m.failedState,a=m.failedProps,i=m.doneText,l=this.state.isTimedout,e="async-button",u||l?(g="is-failed",t.createElement("failedState",t.__spread({},a))):(d?(g="is-waiting",v=w,o=!0,y=t.createElement("i",{className:"fa fa-spinner fa-spin"})):c?(g="is-done",v=i):(g=null,v=n),t.createElement(s.Button,t.__spread({},this.props,{className:[e,g,r],disabled:o}),y,v))}})}).call(t,n(3),n(2),n(11))},function(e,t,n){(function(t){e.exports=t.createClass({displayName:"RefreshButton",propTypes:{beforeText:t.PropTypes.string,buttonText:t.PropTypes.string,afterText:t.PropTypes.string},getDefaultProps:function(){return{beforeText:"There was a problem loading. ",buttonText:"Refresh",afterText:" to try again."}},render:function(){var e,n,r,s;return s=this.props,n=s.beforeText,r=s.buttonText,e=s.afterText,t.createElement("span",{className:"refresh-button"},n,t.createElement("a",{className:"btn btn-primary",href:window.location.href},r),e)}})}).call(t,n(3))},function(e,t,n){(function(t,n){var r,s,o,i,a,p,c,u,l,d,h,f,m=[].slice;d=function(){var e;return e=1<=arguments.length?m.call(arguments,0):[],e.unshift({}),t.extend.apply(t,e)},l={content:n.PropTypes.object.isRequired,feedback_html:n.PropTypes.string,correct_answer_id:n.PropTypes.string,answer_id:n.PropTypes.string,free_response:n.PropTypes.string,group:n.PropTypes.string,related_content:n.PropTypes.array},r={isContinueEnabled:n.PropTypes.bool,isContinueFailed:n.PropTypes.bool,waitingText:n.PropTypes.string,children:n.PropTypes.string,onContinue:n.PropTypes.func},u={review:n.PropTypes.string,isRecovering:n.PropTypes.bool,canTryAnother:n.PropTypes.bool,tryAnother:n.PropTypes.func,canRefreshMemory:n.PropTypes.bool,refreshMemory:n.PropTypes.func},a={free_response:n.PropTypes.string,focus:n.PropTypes.bool.isRequired,disabled:n.PropTypes.bool,onFreeResponseChange:n.PropTypes.func},p={choicesEnabled:n.PropTypes.bool.isRequired,canReview:n.PropTypes.bool.isRequired,onAnswerChanged:n.PropTypes.func},o=t.extend({},r,u),o.step=n.PropTypes.shape(l).isRequired,o.Footer=n.PropTypes.func.isRequired,o.pinned=n.PropTypes.bool,o.panel=n.PropTypes.oneOf(["review","multiple-choice","free-response","teacher-read-only"]),o.review=n.PropTypes.string,o.onAnswerChanged=n.PropTypes.func,o.onFreeResponseChange=n.PropTypes.func,o.onChangeAnswerAttempt=n.PropTypes.func,s=t.union(t.keys(r),t.keys(u)),i=["pinned","courseId","id","taskId","review","panel"],c=t.union(s,i,["onContinue","isContinueEnabled","step"]),h={ExContinueButton:d(r),ExReviewControls:d(r,u),ExFreeResponse:d(l,a),ExMultipleChoice:d(l,p),ExReview:d(l),ExerciseStepCard:o},f=t.mapObject(h,t.keys),f.StepFooter=["pinned","courseId","id","taskId","review","panel"],f.notPanel=t.union(f.ExReviewControls,f.StepFooter,["step"]),e.exports={propTypes:h,props:f}}).call(t,n(2),n(3))},function(e,t,n){(function(t,r){var s,o,i,a,p,c,u;c=n(20).ScrollListenerMixin,p=n(21),o=n(22),u=n(9),a=u.PinnedHeader,s=u.CardBody,i=u.PinnableFooter,e.exports=t.createClass({displayName:"PinnedHeaderFooterCard",propTypes:{buffer:t.PropTypes.number,scrollSpeedBuffer:t.PropTypes.number,forceShy:t.PropTypes.bool,containerBuffer:t.PropTypes.number},getDefaultProps:function(){return{buffer:60,scrollSpeedBuffer:30,forceShy:!1,containerBuffer:30}},getInitialState:function(){return{offset:0,shy:!1,pinned:!1,shouldBeShy:!1,headerHeight:0,containerMarginTop:"0px"}},mixins:[c,p,o],componentWillMount:function(){var e;return this.previousBodyClasses=document.body.className,e=this.props.cardType,document.body.className=e+"-view",document.body.classList.add("pinned-view"),this.props.forceShy?document.body.classList.add("pinned-force-shy"):void 0},componentWillUnmount:function(){return document.body.className=this.previousBodyClasses},getOffset:function(){var e;return null!=this.props.fixedOffset?e=this.props.fixedOffset:null!=this.refs.header&&(e=this.getTopPosition(this.refs.header.getDOMNode())),e},setOffset:function(){var e;return e=this.getOffset(),this.setState({offset:e})},shouldPinHeader:function(e,t){return t>=this.state.offset-this.props.buffer},isScrollingSlowed:function(e,t){return Math.abs(e-t)<=this.props.scrollSpeedBuffer},isScrollingDown:function(e,t){return t>e},isScrollPassBuffer:function(e,t){return t>=this.props.buffer+this.state.offset},shouldBeShy:function(e,t){var n;return n=this.isScrollPassBuffer(e,t)?this.isScrollingDown(e,t)?!0:this.isScrollingSlowed(e,t)?this.state.shy:!1:!1},updatePinState:function(e){var t,n,r,s,o;return t=["remove","add"],this.setState({shy:this.state.shouldBeShy||this.shouldBeShy(e,this.state.scrollTop),pinned:this.shouldPinHeader(e,this.state.scrollTop),shouldBeShy:!1}),s=1*this.state.pinned,r=1*this.state.shy,n=t[s],document.body.classList[n]("pinned-on"),o=t[r],document.body.classList[o]("pinned-shy")},forceShy:function(){return window.scroll(0,this.props.buffer+this.state.offset),this.setState({shouldBeShy:!0})},getHeaderHeight:function(){var e,t,n;return e=null!=(n=this.refs.header)?n.getDOMNode():void 0,t=(null!=e?e.offsetHeight:void 0)||0},setOriginalContainerMargin:function(){var e,t;return(e=null!=(t=this.refs.container)?t.getDOMNode():void 0)&&null!=window.getComputedStyle?this.setState({containerMarginTop:window.getComputedStyle(e).marginTop}):void 0},setContainerMargin:function(){var e,t,n;return t=this.getHeaderHeight(),(e=null!=(n=this.refs.container)?n.getDOMNode():void 0)?this.setState({headerHeight:t}):void 0},_resizeListener:function(){return this.setContainerMargin()},componentDidMount:function(){return this.setOffset(),this.updatePinState(0),this.setOriginalContainerMargin(),this.setContainerMargin()},componentDidUpdate:function(e,t){var n,r,s,o;return r=!(this.state.pinned||this.state.offset===this.getOffset()),o=!t.pinned===this.shouldPinHeader(t.scrollTop,this.state.scrollTop),s=!t.shy===this.shouldBeShy(t.scrollTop,this.state.scrollTop),n=!(t.headerHeight===this.getHeaderHeight()),r&&this.setOffset(),(o||s)&&this.updatePinState(t.scrollTop),n||o?this.setContainerMargin():void 0},componentWillReceiveProps:function(){return this.props.forceShy?this.forceShy():void 0},render:function(){var e,n,s,o,i;return n=this.props.className,s=["pinned-container"],null!=n&&s.push(n),s=s.join(" "),e=r.omit(this.props,"children","header","footer","className"),o=this.state.pinned?{marginTop:this.state.headerHeight+this.props.containerBuffer+"px"}:{marginTop:this.state.containerMarginTop},null!=this.props.header&&(i=t.createElement(a,t.__spread({},e,{ref:"header"}),this.props.header)),t.createElement("div",{className:s,style:o,ref:"container"},i,this.props.children)}})}).call(t,n(3),n(2))},function(e,t){e.exports=r},function(e,t,n){(function(t,n){e.exports={propTypes:{resizeThrottle:t.PropTypes.number},getDefaultProps:function(){return{resizeThrottle:200}},getInitialState:function(){return{windowEl:{},componentEl:{},sizesInitial:{}}},componentWillMount:function(){return this.resizeListener=n.throttle(this.resizeEffect,this.state.resizeThrottle||this.props.resizeThrottle)},componentDidMount:function(){return n.defer(this.setInitialSize),window.addEventListener("resize",this.resizeListener)},componentWillUnmount:function(){return window.removeEventListener("resize",this.resizeListener)},resizeEffect:function(e){var t,n,r;return r=this._getWindowSize(),t=this._getComponentSize(),n={windowEl:r,componentEl:t},this.setState(n),"function"==typeof this._resizeListener?this._resizeListener(n,e):void 0},_getWindowSize:function(){var e,t;return t=window.innerWidth,e=window.innerHeight,{width:t,height:e}},_getComponentSize:function(){var e;return e=this.getDOMNode(),{width:e.offsetWidth,height:e.offsetHeight}},setInitialSize:function(){var e,t,n;return n=this._getWindowSize(),e=this._getComponentSize(),t={windowEl:n,componentEl:e},this.setState({sizesInitial:t,windowEl:n,componentEl:e})}}}).call(t,n(3),n(2))},function(e,t){e.exports={getTopPosition:function(e){return e.getBoundingClientRect().top-document.body.getBoundingClientRect().top}}}])});