!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("underscore"),require("react/addons"),require("react-bootstrap"),require("react-scroll-components")):"function"==typeof define&&define.amd?define("OpenStaxReactComponents",["react","underscore","react/addons","react-bootstrap","react-scroll-components"],t):"object"==typeof exports?exports.OpenStaxReactComponents=t(require("react"),require("underscore"),require("react/addons"),require("react-bootstrap"),require("react-scroll-components")):e.OpenStaxReactComponents=t(e.React,e._,e["React.addons"],e.ReactBootstrap,e.ReactScrollComponents)}(this,function(e,t,n,r,o){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/assets/",t(0)}([function(e,t,n){n(82),e.exports=n(107)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r,o,i,s,a,u,l,p,c,d,f,h,m,v,y,g;u=n(83),p=n(98),l=n(90),i=n(102),h=n(103),g=n(92),f=g.PinnedHeader,s=g.CardBody,d=g.PinnableFooter,m=n(97),r=n(95),v=n(100),o=n(99),a=n(91),c=n(106),y=n(105),e.exports={Exercise:u,ExerciseGroup:l,FreeResponse:p,Breadcrumb:i,PinnedHeaderFooterCard:h,PinnedHeader:f,CardBody:s,PinnableFooter:d,Question:m,ArbitraryHtmlAndMath:r,RefreshButton:v,AsyncButton:o,ChapterSectionMixin:a,GetPositionMixin:c,ResizeListenerMixin:y}},function(e,t,n){var r,o,i,s,a,u,l,p,c,d,f,h;p=n(84),c=n(85),d=n(86),o=n(87),f=n(101).propTypes,h=f.ExerciseStepCard.step,l=["refreshStep","recoverFor","canTryAnother"],a=["onNextStep","canReview","disabled"],u=c.union(a,["onStepCompleted","canTryAnother"]),s=c.union(l,["disabled"]),i=c.union(l,["onStepCompleted","onNextStep","canReview"]),r=p.createClass({displayName:"Exercise",propTypes:{id:p.PropTypes.string.isRequired,taskId:p.PropTypes.string.isRequired,onStepCompleted:p.PropTypes.func.isRequired,onNextStep:p.PropTypes.func.isRequired,getCurrentPanel:p.PropTypes.func.isRequired,step:h,setFreeResponseAnswer:p.PropTypes.func.isRequired,setAnswerId:p.PropTypes.func.isRequired,getReadingForStep:p.PropTypes.func,refreshStep:p.PropTypes.func,recoverFor:p.PropTypes.func,review:p.PropTypes.string,focus:p.PropTypes.bool,courseId:p.PropTypes.string,canTryAnother:p.PropTypes.bool,canReview:p.PropTypes.bool,disabled:p.PropTypes.bool},getInitialState:function(){var e;return e=this.props.id,{currentPanel:this.props.getCurrentPanel(e)}},componentWillMount:function(){var e;return e=this.props.id,this.state.currentPanel?void 0:this.updateCurrentPanel(this.props)},componentWillReceiveProps:function(e){return this.updateCurrentPanel(e)},updateCurrentPanel:function(e){var t,n;return n=(e||this.props).id,t=this.props.getCurrentPanel(n),null!=t&&this.state.currentPanel!==t?this.setState({currentPanel:t}):void 0},getDefaultProps:function(){return{focus:!0,review:"",pinned:!0,canTryAnother:!1,canReview:!1}},refreshMemory:function(){var e,t,n,r;return n=this.props,e=n.id,r=n.taskId,t=this.props.getReadingForStep(e,r).index,this.props.refreshStep(t,e)},tryAnother:function(){var e;return e=this.props.id,this.props.recoverFor(e)},onFreeResponseContinue:function(e){var t,n;return n=this.props.id,t=e.freeResponse,this.props.setFreeResponseAnswer(n,t)},onMultipleChoiceAnswerChanged:function(e){var t;return t=this.props.id,this.props.setAnswerId(t,e.id)},getReviewProps:function(){var e;return e=c.omit(this.props,a),e.onContinue=this.props.onNextStep,e.refreshMemory=this.refreshMemory,e.tryAnother=this.tryAnother,e},getMultipleChoiceProps:function(){var e;return e=c.omit(this.props,s),e.onAnswerChanged=this.onMultipleChoiceAnswerChanged,e},getFreeResponseProps:function(){var e;return e=c.omit(this.props,i),e.onContinue=this.onFreeResponseContinue,e},getTeacherReadOnlyProps:function(){var e;return e=c.omit(this.props,u),e.onContinue=this.props.onNextStep,e.isContinueEnabled=!1,e.controlButtons=!1,e.type="teacher-review",e},render:function(){var e,t,n,r,i,s;return i=this.props,r=i.id,h=i.step,s=i.waitingText,t=this.state.currentPanel,n=d("get-"+t+"-props"),e="function"==typeof this[n]?this[n]():void 0,p.createElement(o,p.__spread({},e,{step:h,panel:t,waitingText:s}))}}),e.exports=r},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){"use strict";e.exports=function(){var e=[].map.call(arguments,function(e){return e.trim()}).filter(function(e){return e.length}).join("-");return e.length?1!==e.length&&/[_.\- ]+/.test(e)?e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(e,t){return t.toUpperCase()}):e[0]===e[0].toLowerCase()&&e.slice(1)!==e.slice(1).toLowerCase()?e:e.toLowerCase():""}},function(e,t,n){var r,o,i,s,a,u,l,p,c,d,f,h,m,v,y,g,b,C,T,P;v=n(88),y=n(85),g=n(89),d=n(90),i=n(92).CardBody,T=n(93),s=T.ExContinueButton,p=T.ExReviewControls,a=T.ExFreeResponse,u=T.ExMultipleChoice,l=T.ExReview,P=n(101),b=P.propTypes,C=P.props,m={"free-response":a,"multiple-choice":u,review:l,"teacher-read-only":l},o={"free-response":s,"multiple-choice":s,review:p,"teacher-read-only":s},r={"free-response":"freeResponse","multiple-choice":"answerId",review:null,"teacher-read-only":null},h={"free-response":"onFreeResponseChange","multiple-choice":"onAnswerChanged",review:"onChangeAnswerAttempt","teacher-read-only":"onChangeAnswerAttempt"},c=v.createClass({displayName:"ExerciseDefaultFooter",render:function(){return v.createElement("div",null,this.props.controlButtons)}}),f=v.createClass({displayName:"ExerciseStepCard",propTypes:b.ExerciseStepCard,getDefaultProps:function(){return{disabled:!1,isContinueEnabled:!0,footer:v.createElement(c,null)}},getInitialState:function(){var e;return e=this.props.step,{freeResponse:e.free_response,answerId:e.answer_id}},isContinueEnabled:function(){var e,t,n;return e=this.props.panel,n=r[e],null==n?!0:(null!=(t=this.state[n])?t.trim().length:void 0)>0},onAnswerChanged:function(e){var t;return this.setState({answerId:e.id}),"function"==typeof(t=this.props).onAnswerChanged?t.onAnswerChanged(e):void 0},onFreeResponseChange:function(e){var t;return this.setState({freeResponse:e}),"function"==typeof(t=this.props).onFreeResponseChange?t.onFreeResponseChange(e):void 0},onChangeAnswerAttempt:function(e){var t;return console.log("You cannot change an answer on a problem you've reviewed.","TODO: show warning in ui."),"function"==typeof(t=this.props).onChangeAnswerAttempt?t.onChangeAnswerAttempt(e):void 0},onContinue:function(){var e,t,n,r,o,i;return i=this.props,o=i.panel,e=i.canReview,n=i.onNextStep,r=i.onStepCompleted,t=i.onContinue,null!=t?void t(this.state):"multiple-choice"!==o||(r(),e)?void 0:n()},render:function(){var e,t,n,r,s,a,u,l,p,c,f,b,T,P,E,_,w,x;return E=this.props,w=E.step,b=E.panel,P=E.pinned,c=E.isContinueEnabled,x=E.waitingText,s=E.controlButtons,r=E.className,u=E.footer,p=w.group,_=w.related_content,t=m[b],e=o[b],f=h[b],a=y.pick(this.props,C.ExReviewControls),a.isContinueEnabled=c&&this.isContinueEnabled(),a.onContinue=this.onContinue,T=y.omit(this.props,C.notPanel),T.choicesEnabled=!x,T[f]=this[f],l=y.pick(this.props,C.StepFooter),l.controlButtons=s||v.createElement(e,v.__spread({},a)),u=v.addons.cloneWithProps(u,l),n=g("task-step","exercise-card",r),v.createElement(i,{className:n,footer:u,pinned:P},v.createElement("div",{className:"exercise-"+b},v.createElement(t,v.__spread({},w,T)),v.createElement(d,{key:"step-exercise-group",group:p,related_content:_})))}}),e.exports=f},function(e,t){e.exports=n},function(e,t,n){var r;/*!
	  Copyright (c) 2015 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e+=" "+n;else if(Array.isArray(n))e+=" "+o.apply(null,n);else if("object"===r)for(var s in n)i.call(n,s)&&n[s]&&(e+=" "+s)}}return e.substr(1)}var i={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=o:(r=function(){return o}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)))}()},function(e,t,n){var r,o,i,s,a,u,l;a=n(84),u=n(85),l=n(86),r=n(91),o={show:!1},s={"default":o,core:o,personalized:{show:!0,label:"Personalized"},"spaced practice":{show:!0},spaced_practice:{show:!0}},i=a.createClass({displayName:"ExerciseGroup",mixins:[r],propTypes:{group:a.PropTypes.oneOf(u.keys(s)).isRequired,related_content:a.PropTypes.array.isRequired},getDefaultProps:function(){return{group:"default",related_content:[]}},getPossibleGroups:function(){return u.keys(s)},buildLabel:function(e){var t;return t=this.sectionFormat(e.chapter_section,this.props.sectionSeparator),"Review - "+t+" "+e.title},getGroupLabel:function(e,t){var n;return n=null!=s[e].label?s[e].label:u.map(t,this.buildLabel)},render:function(){var e,t,n,r,o,i;return o=this.props,t=o.group,i=o.related_content,n=null,s[t].show&&(e=t.replace(" ","_"),r=this.getGroupLabel(t,i),n=a.createElement("div",{className:"task-step-group"},a.createElement("i",{className:"icon-sm icon-"+e}),a.createElement("span",{className:"task-step-group-label"},r))),n}}),e.exports=i},function(e,t,n){var r;r=n(85),e.exports={getDefaultProps:function(){return{sectionSeparator:".",skipZeros:!0,inputStringSeparator:"."}},sectionFormat:function(e,t){var n,o,i,s,a;return o=this.props,n=o.inputStringSeparator,a=o.skipZeros,s=o.sectionSeparator,r.isString(e)&&(i=e.split(n)),r.isArray(e)&&(i=e),i=r.clone(i),a&&0===r.last(i)&&i.pop(),i instanceof Array?i.join(t||s):e}}},function(e,t,n){var r,o,i,s;s=n(84),i=s.createClass({displayName:"PinnedHeader",propTypes:{className:s.PropTypes.string},render:function(){var e,t;return e=this.props.className,t="pinned-header",null!=e&&(t+=" "+e),s.createElement("div",{className:t},this.props.children)}}),o=s.createClass({displayName:"PinnableFooter",propTypes:{className:s.PropTypes.string,pinned:s.PropTypes.bool.isRequired},getDefaultProps:function(){return{pinned:!0}},render:function(){var e,t,n,r,o;return o=this.props,e=o.className,r=o.pinned,t=r?"pinned":"card",n=t+"-footer",null!=e&&(n+=" "+e),s.createElement("div",{className:n},this.props.children)}}),r=s.createClass({displayName:"CardBody",propTypes:{className:s.PropTypes.string,footerClassName:s.PropTypes.string,pinned:s.PropTypes.bool.isRequired},getDefaultProps:function(){return{pinned:!0}},render:function(){var e,t,n,r,i,a,u,l;return l=this.props,t=l.className,u=l.pinned,i=l.footerClassName,r=l.footer,e=l.children,n="card-body",null!=t&&(n+=" "+t),r&&(a=s.createElement(o,{pinned:u,className:i},r)),s.createElement("div",{className:n},e,a)}}),e.exports={PinnedHeader:i,CardBody:r,PinnableFooter:o}},function(e,t,n){var r,o,i,s,a,u,l,p,c,d,f,h,m,v,y,g,b;m=n(84),i=n(94),v=n(85),r=n(95),h=n(97),f=n(98),o=n(99),d=n(90),s=n(92).CardBody,b=n(101),y=b.propTypes,g=b.props,a=m.createClass({displayName:"ExContinueButton",propTypes:y.ExContinueButton,getDefaultProps:function(){return{isContinueFailed:!1,waitingText:null,isContinueEnabled:!0}},render:function(){var e,t,n,r,i,s,a;return s=this.props,n=s.isContinueEnabled,r=s.isContinueFailed,a=s.waitingText,i=s.onContinue,t=s.children,e=t||"Continue",m.createElement(o,{bsStyle:"primary",className:"continue",key:"step-continue",onClick:i,disabled:!n,isWaiting:!!a,waitingText:a,isFailed:r},e)}}),c=m.createClass({displayName:"ExReviewControls",propTypes:y.ExReviewControls,getDefaultProps:function(){return{review:"",canTryAnother:!1,isRecovering:!1,canRefreshMemory:!1}},render:function(){var e,t,n,r,s,u,l,p,c,d,f,h,v,y,g,b,C;return c=this.props,y=c.review,t=c.canTryAnother,g=c.tryAnother,l=c.isRecovering,d=this.props,e=d.canRefreshMemory,h=d.refreshMemory,f=this.props,u=f.isContinueFailed,C=f.waitingText,p=f.onContinue,s=f.isContinueEnabled,r=t?"Move On":"",t&&(b=m.createElement(o,{key:"step-try-another",bsStyle:"primary",className:"-try-another",onClick:g,isWaiting:l,waitingText:"Loading Another…"},"Try Another")),e&&(v=m.createElement(i.Button,{key:"step-refresh",bsStyle:"primary",className:"-refresh-memory",onClick:h},"Refresh My Memory")),n="completed"!==y?m.createElement(a,{key:"step-continue",isContinueFailed:u,waitingText:C,onContinue:p,isContinueEnabled:s},r):void 0,m.createElement("div",{className:"task-footer-buttons",key:"step-buttons"},b,n)}}),u=m.createClass({displayName:"ExFreeResponse",propTypes:y.ExFreeResponse,getDefaultProps:function(){return{disabled:!1,free_response:""}},componentDidMount:function(){return this.focusBox()},componentDidUpdate:function(){return this.focusBox()},focusBox:function(){return this.props.focus?this.refs.freeResponse.getDOMNode().focus():void 0},onFreeResponseChange:function(){var e,t;return t=this.refs.freeResponse.getDOMNode().value,"function"==typeof(e=this.props).onFreeResponseChange?e.onFreeResponseChange(t):void 0},render:function(){var e,t,n,o,i,s;return s=this.props,e=s.content,t=s.disabled,o=s.onFreeResponseChange,n=s.free_response,i=e.questions[0],m.createElement("div",{className:"exercise"},m.createElement(r,{className:"stimulus",block:!0,html:e.stimulus_html}),m.createElement(r,{className:"stem",block:!0,html:i.stem_html}),m.createElement("textarea",{disabled:t,ref:"freeResponse",placeholder:"Enter your response",defaultValue:n,onChange:this.onFreeResponseChange}),m.createElement("div",{className:"exercise-uid"},e.uid))}}),l=m.createClass({displayName:"ExMulitpleChoice",propTypes:y.ExMulitpleChoice,getDefaultProps:function(){return{answer_id:""}},getInitialState:function(){var e;return e=this.props.answer_id,{answerId:e}},onAnswerChanged:function(e){var t;if(e.id!==this.state.answerId)return this.setState({answerId:e.id}),"function"==typeof(t=this.props).onAnswerChanged?t.onAnswerChanged(e):void 0},render:function(){var e,t,n,r,o,i,s;return s=this.props,n=s.content,o=s.free_response,r=s.correct_answer_id,t=s.choicesEnabled,i=n.questions[0],e=this.state.answerId,m.createElement("div",{className:"exercise"},m.createElement(h,{answer_id:e,onChange:this.onAnswerChanged,choicesEnabled:t,model:i,exercise_uid:n.uid,correct_answer_id:r},m.createElement(f,{free_response:o}),m.createElement("div",{className:"multiple-choice-prompt"},"Choose the best answer from the following:")))}}),p=m.createClass({displayName:"ExReview",propTypes:y.ExReview,render:function(){var e,t,n,r,o,i,s,a,u;return a=this.props,t=a.content,o=a.free_response,e=a.answer_id,n=a.correct_answer_id,r=a.feedback_html,u=a.type,i=a.onChangeAnswerAttempt,s=t.questions[0],m.createElement("div",{className:"exercise"},m.createElement(h,{key:"step-question",model:s,answer_id:e,exercise_uid:t.uid,correct_answer_id:n,feedback_html:r,type:u,onChangeAttempt:i},m.createElement(f,{free_response:o})))}}),e.exports={ExContinueButton:a,ExReviewControls:c,ExFreeResponse:u,ExMultipleChoice:l,ExReview:p}},function(e,t){e.exports=r},function(e,t,n){var r,o,i;r=n(84),o=n(85),i=n(96).typesetMath,e.exports=r.createClass({displayName:"ArbitraryHtmlAndMath",propTypes:{className:r.PropTypes.string,html:r.PropTypes.string,block:r.PropTypes.bool.isRequired},getDefaultProps:function(){return{block:!1}},render:function(){var e,t;return e=["has-html"],this.props.className&&e.push(this.props.className),e=e.join(" "),t=o.omit(this.props,"className","block","html"),this.props.block?r.createElement("div",r.__spread({},t,{className:e,dangerouslySetInnerHTML:this.getHTMLFromProp()})):r.createElement("span",r.__spread({},t,{className:e,dangerouslySetInnerHTML:this.getHTMLFromProp()}))},getHTMLFromProp:function(){var e;return e=this.props.html,e?{__html:e}:void 0},shouldComponentUpdate:function(e,t){var n,r;for(n in e)if(r=e[n],this.props[n]!==r)return!0;return!1},componentDidMount:function(){return this.updateDOMNode()},componentDidUpdate:function(){return this.updateDOMNode()},updateDOMNode:function(){var e,t;return t=this.getDOMNode(),e=t.querySelectorAll("a"),o.each(e,function(e){var t;return"#"!==(null!=(t=e.getAttribute("href"))?t[0]:void 0)?e.setAttribute("target","_blank"):void 0}),i(t)}})},function(e,t,n){var r,o,i,s,a,u,l,p,c,d;u=n(85),i="‌‌‌",s="​​​",o="[data-math]:not(.math-rendered)",a="math:not(.math-rendered)",r=o+", "+a,l=function(){return window.MathJax.Hub.Queue([function(){var e,t,n,r,o,i;for(o=["MathJax_Message","MathJax_Font_Test"],i=[],t=0,n=o.length;n>t&&(r=o[t],e=document.getElementById(r),e);t++)e.parentElement!==document.body&&(e=e.parentElement),i.push(e.parentElement.removeChild(e));return i}])},c=function(){var e,t,n,r,p,c;for(e=[],c=document.querySelectorAll(o),n=0,r=c.length;r>n;n++)p=c[n],t=p.getAttribute("data-math"),"div"===p.tagName.toLowerCase()?p.textContent=""+i+t+i:p.textContent=""+s+t+s,e.push(p);return e=e.concat(u.pluck(document.querySelectorAll(a),"parentNode")),window.MathJax.Hub.Typeset(e),l()},c=u.debounce(c,10),d=function(e){var t,n;return null!=(null!=(t=window.MathJax)&&null!=(n=t.Hub)?n.Queue:void 0)&&e.querySelector(r)?c():void 0},p=function(){var e,t,n;return e={showProcessingMessages:!1,tex2jax:{displayMath:[[i,i]],inlineMath:[[s,s]]},styles:{"#MathJax_Message":{visibility:"hidden",left:"",right:0},"#MathJax_MSIE_Frame":{visibility:"hidden",left:"",right:0}}},t=function(){return window.MathJax.Hub.Configured()},(null!=(n=window.MathJax)?n.Hub:void 0)?(window.MathJax.Hub.Config(e),window.MathJax.Hub.processSectionDelay=0,t()):(e.AuthorInit=t,window.MathJax=e)},e.exports={typesetMath:d,startMathJax:p}},function(e,t,n){var r,o,i,s,a,u,l,p,c,d=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};s=n(84),a=n(85),u=n(89),o=n(95),l=0,c=function(e,t){var n;return n=e.id===t,null!=e.correctness&&(n="1.0"===e.correctness),n},p=function(e,t){var n,r;return r=e.id,n=d.call(t,r)>=0},r=s.createClass({displayName:"Answer",propTypes:{answer:s.PropTypes.shape({id:s.PropTypes.oneOfType([s.PropTypes.string,s.PropTypes.number]).isRequired,content_html:s.PropTypes.string.isRequired,correctness:s.PropTypes.string,selected_count:s.PropTypes.number}).isRequired,iter:s.PropTypes.number.isRequired,qid:s.PropTypes.oneOfType([s.PropTypes.string,s.PropTypes.number]).isRequired,type:s.PropTypes.string.isRequired,hasCorrectAnswer:s.PropTypes.bool.isRequired,onChangeAnswer:s.PropTypes.func.isRequired,disabled:s.PropTypes.bool,chosenAnswer:s.PropTypes.array,correctAnswerId:s.PropTypes.string,answered_count:s.PropTypes.number},getDefaultProps:function(){return{disabled:!1}},render:function(){var e,t,n,r,i,a,d,f,h,m,v,y,g,b,C,T,P;return C=this.props,e=C.answer,m=C.iter,g=C.qid,P=C.type,i=C.correctAnswerId,t=C.answered_count,d=C.hasCorrectAnswer,n=C.chosenAnswer,v=C.onChangeAnswer,a=C.disabled,null==g&&(g="auto-"+l++),f=p(e,n),h=c(e,i),r=u("answers-answer",{"answer-checked":f,"answer-correct":h}),d||"teacher-review"===P||(b=s.createElement("input",{type:"radio",className:"answer-input-box",checked:f,id:g+"-option-"+m,name:g+"-options",onChange:v(e),disabled:a})),"teacher-review"===P&&(y=Math.round(e.selected_count/t*100)||0,T=s.createElement("div",{className:"selected-count","data-count":""+e.selected_count,"data-percent":""+y})),s.createElement("div",{className:r},T,b,s.createElement("label",{htmlFor:g+"-option-"+m,className:"answer-label"},s.createElement("div",{className:"answer-letter"}),s.createElement(o,{className:"answer-content",html:e.content_html})))}}),i=s.createClass({displayName:"Feedback",propTypes:{children:s.PropTypes.string.isRequired,position:s.PropTypes.oneOf(["top","bottom","left","right"])},getDefaultProps:function(){return{position:"bottom"}},render:function(){var e;return e=u("question-feedback","popover",this.props.position),s.createElement("div",{className:e},s.createElement("div",{className:"arrow"}),s.createElement(o,{className:"question-feedback-content has-html popover-content",html:this.props.children,block:!0}))}}),e.exports=s.createClass({displayName:"Question",propTypes:{model:s.PropTypes.object.isRequired,type:s.PropTypes.string.isRequired,answer_id:s.PropTypes.string,correct_answer_id:s.PropTypes.string,content_uid:s.PropTypes.string,feedback_html:s.PropTypes.string,answered_count:s.PropTypes.number,onChange:s.PropTypes.func,onChangeAttempt:s.PropTypes.func},getInitialState:function(){return{answer:null}},getDefaultProps:function(){return{type:"student"}},onChangeAnswer:function(e){return function(t){return function(n){var r;return null!=t.props.onChange?(t.setState({answer_id:e.id}),t.props.onChange(e)):(n.preventDefault(),"function"==typeof(r=t.props).onChangeAttempt?r.onChangeAttempt(e):void 0)}}(this)},render:function(){var e,t,n,c,d,f,h,m,v,y,g,b,C,T;return C=this.props,T=C.type,e=C.answered_count,c=C.choicesEnabled,h=C.correct_answer_id,d=[this.props.answer_id,this.state.answer_id],n=null,y=this.props.model.stem_html,g=this.props.model.id||"auto-"+l++,v=!!h,this.props.feedback_html&&(m=s.createElement(i,null,this.props.feedback_html)),b={qid:this.props.model.id,correctAnswerId:h,hasCorrectAnswer:v,chosenAnswer:d,onChangeAnswer:this.onChangeAnswer,type:T,answered_count:e,disabled:!c},t=a.chain(this.props.model.answers).sortBy(function(e){return parseInt(e.id)}).map(function(e,t){var o,i;return o={answer:e,iter:t,key:b.qid+"-option-"+t},i=a.extend({},o,b),p(e,d)&&(n=t),s.createElement(r,s.__spread({},i))}).value(),null!=m&&null!=n&&t.splice(n+1,0,m),f=u("question",{"has-correct-answer":v}),s.createElement("div",{className:f},s.createElement(o,{className:"question-stem",block:!0,html:y}),this.props.children,s.createElement("div",{className:"answers-table"},t),s.createElement("div",{className:"exercise-uid"},this.props.exercise_uid))}})},function(e,t,n){var r,o;o=n(84),r=o.createClass({displayName:"FreeResponse",propTypes:{free_response:o.PropTypes.string.isRequired},getDefaultProps:function(){return{free_response:""}},render:function(){var e,t,n,i;return n=this.props,t=n.free_response,i=n.student_names,r=null,e={className:"free-response"},null!=i&&(e["data-student-names"]=i.join(", ")),null!=t&&t.length&&(r=o.createElement("div",o.__spread({},e),t)),r}}),e.exports=r},function(e,t,n){var r,o,i,s;o=n(84),r=n(94),s=n(85),i=n(100),e.exports=o.createClass({displayName:"AsyncButton",getInitialState:function(){return{isTimedout:!1}},componentDidUpdate:function(){var e,t,n,r,o;return r=this.props,n=r.isWaiting,e=r.isJob,t=this.state.isTimedout,o=e?6e5:3e4,n&&!t?s.delay(function(e){return function(){return e.checkForTimeout()}}(this),o):void 0},checkForTimeout:function(){var e;return e=this.props.isWaiting,e?this.setState({isTimedout:!0}):void 0},propTypes:{isWaiting:o.PropTypes.bool.isRequired,isDone:o.PropTypes.bool,isFailed:o.PropTypes.bool,waitingText:o.PropTypes.node,failedState:o.PropTypes.func,failedProps:o.PropTypes.object,doneText:o.PropTypes.node,isJob:o.PropTypes.bool},getDefaultProps:function(){return{isDone:!1,isFailed:!1,waitingText:"Loading…",failedState:i,failedProps:{beforeText:"There was a problem.  "},doneText:"",isJob:!1}},render:function(){var e,t,n,i,s,a,u,l,p,c,d,f,h,m,v,y,g,b;return f=this.props,n=f.className,i=f.disabled,h=this.props,d=h.isWaiting,l=h.isDone,p=h.isFailed,m=this.props,t=m.children,b=m.waitingText,u=m.failedState,a=m.failedProps,s=m.doneText,c=this.state.isTimedout,e="async-button",p||c?(y="is-failed",o.createElement("failedState",o.__spread({},a))):(d?(y="is-waiting",g=b,i=!0,v=o.createElement("i",{className:"fa fa-spinner fa-spin"})):l?(y="is-done",g=s):(y=null,g=t),o.createElement(r.Button,o.__spread({},this.props,{className:[e,y,n],disabled:i}),v,g))}})},function(e,t,n){var r;r=n(84),e.exports=r.createClass({displayName:"RefreshButton",propTypes:{beforeText:r.PropTypes.string,buttonText:r.PropTypes.string,afterText:r.PropTypes.string},getDefaultProps:function(){return{beforeText:"There was a problem loading. ",buttonText:"Refresh",afterText:" to try again."}},render:function(){var e,t,n,o;return o=this.props,t=o.beforeText,n=o.buttonText,e=o.afterText,r.createElement("span",{className:"refresh-button"},t,r.createElement("a",{className:"btn btn-primary",href:window.location.href},n),e)}})},function(e,t,n){var r,o,i,s,a,u,l,p,c,d,f,h,m,v,y=[].slice;c=n(84),f=n(85),h=function(){var e;return e=1<=arguments.length?y.call(arguments,0):[],e.unshift({}),f.extend.apply(f,e)},d={content:c.PropTypes.object.isRequired,feedback_html:c.PropTypes.string,correct_answer_id:c.PropTypes.string,answer_id:c.PropTypes.string,free_response:c.PropTypes.string,group:c.PropTypes.string,related_content:c.PropTypes.array},r={isContinueEnabled:c.PropTypes.bool,isContinueFailed:c.PropTypes.bool,waitingText:c.PropTypes.string,children:c.PropTypes.string,onContinue:c.PropTypes.func},p={review:c.PropTypes.string,isRecovering:c.PropTypes.bool,canTryAnother:c.PropTypes.bool,tryAnother:c.PropTypes.func,canRefreshMemory:c.PropTypes.bool,refreshMemory:c.PropTypes.func},a={free_response:c.PropTypes.string,focus:c.PropTypes.bool.isRequired,disabled:c.PropTypes.bool,onFreeResponseChange:c.PropTypes.func},u={choicesEnabled:c.PropTypes.bool.isRequired,canReview:c.PropTypes.bool.isRequired,onAnswerChanged:c.PropTypes.func},i=f.extend({},r,p),i.step=c.PropTypes.shape(d).isRequired,i.footer=c.PropTypes.node.isRequired,i.pinned=c.PropTypes.bool,i.panel=c.PropTypes.oneOf(["review","multiple-choice","free-response","teacher-read-only"]),i.review=c.PropTypes.string,i.onAnswerChanged=c.PropTypes.func,i.onFreeResponseChange=c.PropTypes.func,i.onChangeAnswerAttempt=c.PropTypes.func,o=f.union(f.keys(r),f.keys(p)),s=["pinned","courseId","id","taskId","review","panel"],l=f.union(o,s,["onContinue","isContinueEnabled","step"]),m={ExContinueButton:h(r),ExReviewControls:h(r,p),ExFreeResponse:h(d,a),ExMultipleChoice:h(d,u),ExReview:h(d),ExerciseStepCard:i},v=f.mapObject(m,f.keys),v.StepFooter=["pinned","courseId","id","taskId","review","panel"],v.notPanel=f.union(v.ExReviewControls,v.StepFooter,["step"]),e.exports={propTypes:m,props:v}},function(e,t,n){var r,o,i,s;o=n(84),i=n(85),s=n(89),r=o.createClass({displayName:"Breadcrumb",propTypes:{crumb:o.PropTypes.object.isRequired,goToStep:o.PropTypes.func.isRequired,step:o.PropTypes.object.isRequired,canReview:o.PropTypes["boolean"],currentStep:o.PropTypes.number,onMouseEnter:o.PropTypes.func,onMouseLeave:o.PropTypes.func},getDefaultProps:function(){return{canReview:!0,step:{}}},getInitialState:function(){return this.getState(this.props)},componentWillReceiveProps:function(e){var t;return t=this.getState(e),this.setState(t)},getState:function(e){var t,n,r,o,i,s,a,u,l,p;return n=e.crumb,o=e.currentStep,p=e.step,t=e.canReview,s=!1,l=!1,a=n.key===o,i=null!=p?p.is_completed:void 0,u="end"===n.type,r=u?n.type:null!=p?p.type:void 0,i&&t&&null!=p.correct_answer_id&&(p.is_correct?s=!0:p.answer_id&&(l=!0)),{isCorrect:s,isIncorrect:l,isCurrent:a,isCompleted:i,isEnd:u,crumbType:r}},render:function(){var e,t,n,r,a,u,l,p,c,d,f,h,m,v,y,g,b,C;return v=this.props,b=v.step,n=v.crumb,u=v.goToStep,e=v.className,y=this.state,c=y.isCorrect,h=y.isIncorrect,d=y.isCurrent,p=y.isCompleted,f=y.isEnd,a=y.crumbType,m=i.pick(this.props,"onMouseEnter","onMouseLeave","style"),d&&(C="Current Step ("+a+")"),p&&null==C&&(C="Step Completed ("+a+"). Click to review"),c&&(g=o.createElement("i",{className:"icon-lg icon-correct"})),h&&(g=o.createElement("i",{className:"icon-lg icon-incorrect"})),f&&(C=b.title+" Completion"),t=s("task-breadcrumbs-step","icon-stack","icon-lg",b.group,a,e,{current:d,active:d,completed:p,"status-correct":c,"status-incorrect":h}),null!=n.data.labels&&(r=i.map(n.data.labels,function(e){return"icon-"+e})),l=s("icon-"+a,r),o.createElement("span",o.__spread({},m,{className:t,title:C,onClick:i.partial(u,n.key),"data-chapter":n.sectionLabel,key:"step-"+n.key}),o.createElement("i",{className:"icon-lg "+l}),g)}}),e.exports=r},function(e,t,n){var r,o,i,s,a,u,l,p,c;a=n(84),p=n(85),l=n(104).ScrollListenerMixin,u=n(105),o=n(106),c=n(92),s=c.PinnedHeader,r=c.CardBody,i=c.PinnableFooter,e.exports=a.createClass({displayName:"PinnedHeaderFooterCard",propTypes:{buffer:a.PropTypes.number,scrollSpeedBuffer:a.PropTypes.number,forceShy:a.PropTypes.bool,containerBuffer:a.PropTypes.number},getDefaultProps:function(){return{buffer:60,scrollSpeedBuffer:30,forceShy:!1,containerBuffer:30}},getInitialState:function(){return{offset:0,shy:!1,pinned:!1,shouldBeShy:!1,headerHeight:0,containerMarginTop:"0px"}},mixins:[l,u,o],componentWillMount:function(){var e;return this.previousBodyClasses=document.body.className,e=this.props.cardType,document.body.className=e+"-view",document.body.classList.add("pinned-view"),this.props.forceShy?document.body.classList.add("pinned-force-shy"):void 0},componentWillUnmount:function(){return document.body.className=this.previousBodyClasses},getOffset:function(){var e;return null!=this.props.fixedOffset?e=this.props.fixedOffset:null!=this.refs.header&&(e=this.getTopPosition(this.refs.header.getDOMNode())),e},setOffset:function(){var e;return e=this.getOffset(),this.setState({offset:e})},shouldPinHeader:function(e,t){return t>=this.state.offset-this.props.buffer},isScrollingSlowed:function(e,t){return Math.abs(e-t)<=this.props.scrollSpeedBuffer},isScrollingDown:function(e,t){return t>e},isScrollPassBuffer:function(e,t){return t>=this.props.buffer+this.state.offset},shouldBeShy:function(e,t){var n;return n=this.isScrollPassBuffer(e,t)?this.isScrollingDown(e,t)?!0:this.isScrollingSlowed(e,t)?this.state.shy:!1:!1},updatePinState:function(e){var t,n,r,o,i;return t=["remove","add"],this.setState({shy:this.state.shouldBeShy||this.shouldBeShy(e,this.state.scrollTop),pinned:this.shouldPinHeader(e,this.state.scrollTop),shouldBeShy:!1}),o=1*this.state.pinned,r=1*this.state.shy,n=t[o],document.body.classList[n]("pinned-on"),i=t[r],document.body.classList[i]("pinned-shy")},forceShy:function(){return window.scroll(0,this.props.buffer+this.state.offset),this.setState({shouldBeShy:!0})},getHeaderHeight:function(){var e,t,n;return e=null!=(n=this.refs.header)?n.getDOMNode():void 0,t=(null!=e?e.offsetHeight:void 0)||0},setOriginalContainerMargin:function(){var e,t;return(e=null!=(t=this.refs.container)?t.getDOMNode():void 0)&&null!=window.getComputedStyle?this.setState({containerMarginTop:window.getComputedStyle(e).marginTop}):void 0},setContainerMargin:function(){var e,t,n;return t=this.getHeaderHeight(),(e=null!=(n=this.refs.container)?n.getDOMNode():void 0)?this.setState({headerHeight:t}):void 0},_resizeListener:function(){return this.setContainerMargin()},componentDidMount:function(){return this.setOffset(),this.updatePinState(0),this.setOriginalContainerMargin(),this.setContainerMargin()},componentDidUpdate:function(e,t){var n,r,o,i;return r=!(this.state.pinned||this.state.offset===this.getOffset()),i=!t.pinned===this.shouldPinHeader(t.scrollTop,this.state.scrollTop),o=!t.shy===this.shouldBeShy(t.scrollTop,this.state.scrollTop),n=!(t.headerHeight===this.getHeaderHeight()),r&&this.setOffset(),(i||o)&&this.updatePinState(t.scrollTop),n||i?this.setContainerMargin():void 0},componentWillReceiveProps:function(){return this.props.forceShy?this.forceShy():void 0},render:function(){var e,t,n,r,o;return t=this.props.className,n=["pinned-container"],null!=t&&n.push(t),n=n.join(" "),e=p.omit(this.props,"children","header","footer","className"),r=this.state.pinned?{marginTop:this.state.headerHeight+this.props.containerBuffer+"px"}:{marginTop:this.state.containerMarginTop},null!=this.props.header&&(o=a.createElement(s,a.__spread({},e,{ref:"header"}),this.props.header)),a.createElement("div",{className:n,style:r,ref:"container"},o,this.props.children)}})},function(e,t){e.exports=o},function(e,t,n){var r,o;r=n(84),o=n(85),e.exports={propTypes:{resizeThrottle:r.PropTypes.number},getDefaultProps:function(){return{resizeThrottle:200}},getInitialState:function(){return{windowEl:{},componentEl:{},sizesInitial:{}}},componentWillMount:function(){return this.resizeListener=o.throttle(this.resizeEffect,this.state.resizeThrottle||this.props.resizeThrottle)},componentDidMount:function(){return o.defer(this.setInitialSize),window.addEventListener("resize",this.resizeListener)},componentWillUnmount:function(){return window.removeEventListener("resize",this.resizeListener)},resizeEffect:function(e){var t,n,r;return r=this._getWindowSize(),t=this._getComponentSize(),n={windowEl:r,componentEl:t},this.setState(n),"function"==typeof this._resizeListener?this._resizeListener(n,e):void 0},_getWindowSize:function(){var e,t;return t=window.innerWidth,e=window.innerHeight,{width:t,height:e}},_getComponentSize:function(){var e;return e=this.getDOMNode(),{width:e.offsetWidth,height:e.offsetHeight}},setInitialSize:function(){var e,t,n;return n=this._getWindowSize(),e=this._getComponentSize(),t={windowEl:n,componentEl:e},this.setState({sizesInitial:t,windowEl:n,componentEl:e})}}},function(e,t){e.exports={getTopPosition:function(e){return e.getBoundingClientRect().top-document.body.getBoundingClientRect().top}}},function(e,t){}])});